import fs from 'fs';
export function parseCucumberJson(filepath:string){ const raw=fs.readFileSync(filepath,'utf8'); const data=JSON.parse(raw); const scenarios:any[]=[]; for(const feature of data){ for(const element of feature.elements||[]){ const steps=element.steps||[]; const status=steps.some((s:any)=>s.result&&s.result.status==='failed') ? 'failed' : 'passed'; const durationMs=steps.reduce((acc:any,s:any)=>acc + ((s.result&&s.result.duration)?(s.result.duration/1e6):0),0); scenarios.push({feature_name:feature.name, scenario_name:element.name, status, duration_ms:Math.round(durationMs)}); } } return {scenarios}; }
